<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
    <title>Panada PHP Framework 0.3.1 Documentation - Upload Library</title>
    <link rel="stylesheet" href="../../style.css" type="text/css" media="screen" />
</head>
<body>
    <div class="header">
        <div class="logo">
	    <a target="_blank" href="http://panadaframework.com/"><img src="../../images/logo.png" height="21" border="0" /></a>
	</div>
        <div class="menu">
            <form action="http://www.google.com/search" method="get">
	    <input type="hidden" value="panadaframework.com/documentation/" id="as_sitesearch" name="as_sitesearch">
            <input class="search-input" type="text" name="q" /><button class="search-button" type="submit">Search</button>
            </form>
        </div>
    </div>
    
    <div class="subheader">
        <h1>Panada Framework 0.3.1 Documentation</h1>
    </div>
    
    <div class="wrapper">
        <div class="sidebar">
            <div class="navigation">
                <ul>
                    <li>
                        <a href="../index.html">Umum</a>
                        <ul>
                            <li><a href="../index.html#about">Tentang Panada</a></li>
                            <li><a href="../index.html#feature">Keunggulan (<em>Feature</em>)</a></li>
                            <li><a href="../index.html#license">Lisensi</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="../config.html">Konfigurasi</a>
                        <ul>
                            <li><a href="../config.html#general">Dasar</a></li>
                            <li><a href="../config.html#additional_config">Tambahan</a></li>
                            <li><a href="../config.html#webserver">Webserver</a></li>
                        </ul>
                    </li>
                    <li>
                        Referensi
                        <ul>
                            <li><a href="../references/controller.html">Controller</a></li>
                            <li><a href="../references/model.html">Model</a></li>
                            <li><a href="../references/view.html">View</a></li>
                            <li><a href="../references/library.html">Library</a></li>
                            <li><a href="../references/autoloader.html">Auto Loader</a></li>
                            <li><a href="../references/global_method.html">Global Method dan Properties</a></li>
			    <li><a href="../references/module.html">Module</a></li>
			    <li><a href="../references/upgrade.html">Upgrade</a></li>
                        </ul>
                            
                    </li>
                    <li>
                        <a href="index.html">Paket Library</a>
                        <ul>
                            <li><a href="database/index.html">Database</a></li>
                            <li><a href="cache/index.html">Cache</a></li>
                            <li><a href="session.html">Session</a></li>
                            <li><a href="pagination.html">Pagination</a></li>
                            <li><a href="email.html">Email</a></li>
                            <li><a href="encryption.html">Encryption</a></li>
                            <li>
				<a href="upload.html">Upload</a>
				<ul>
				<li><a href="#auto_rename">Auto Rename</a></li>
				<li><a href="#auto_folder">Sub-folder Otomatis</a></li>
				<li><a href="#file_validation">Validasi Tipe File</a></li>
				<li><a href="#size_validation">Validasi Ukuran File</a></li>
				<li><a href="#error_message">Error Message</a></li>
				<li><a href="#image_editing">Image Editing</a></li>
				<li><a href="#discussion">Diskusi</a></li>
				</ul>
			    </li>
                            <li><a href="image.html">Image</a></li>
                            <li><a href="request.html">Request</a></li>
                            <li><a href="rest.html">RESTfull</a></li>
			    <li><a href="tools.html">Tools</a></li>
                        </ul>
                    </li>
                    <li><a href="../contribution.html">Kontribusi</a></li>
                    <li><a href="../credit.html">Credit</a></li>
                </ul>
	    </div>
            
        </div>
        
        <div class="content">
            <div class="lead">
                <h2>Upload</h2>
                
		<p>Class upload Panada memiliki feature-feature lengkap yang bisa langsung digunakan di dalam aplikasi Anda. Feature ini antara lain:</p>
		<ul>
		    <li><a href="#auto_rename">Auto Rename</a></li>
		    <li><a href="#auto_folder">Sub-folder Otomatis</a></li>
		    <li><a href="#file_validation">Validasi Tipe File</a></li>
		    <li><a href="#size_validation">Validasi Ukuran File</a></li>
		    <li><a href="#error_message">Error Message</a></li>
		    <li><a href="#image_editing">Image Editing</a></li>
		    <li><a href="#discussion">Diskusi</a></li>
		</ul>
            </div>
            
            <div class="main">
                <h3>Inisialisasi</h3>
                <p>Sebelum digunakan, class upload harus diinisialisasi terlebih dahulu.</p>
		<code>
		    $this->upload = new Library_upload();
		</code>
                
            </div>
	    
	    <div class="main">
                <h3>Method now()</h3>
                <p>Method untuk melakukan proses upload adalah:</p>
		<code>
		    <b>bool</b> $this->upload->now( array $_FILES['my_file'] );
		</code>
                
            </div>
	    
	    <div class="main">
                <h3>Properties get_file_info</h3>
                <p>Untuk mendapatkan data yang sudah berhasil diupload bisa menggunakan properties:</p>
		<code>
		    <b>array</b> $this->upload->get_file_info;
		</code>
		<p>Informasi yang diberikan:</p>
		<table>
		<thead>
		<tr>
		    <th scope="col">Array Key</th>
		    <th scope="col">Deskripsi</th>
		    <th scope="col">Contoh</th>
		</tr>
		</thead>
		<tbody>
		<tr class="odd">
		    <td>extension</td>
		    <td>Ekstensi dari file yang diupload.</td>
		    <td>jpg</td>
		</tr>
		<tr>
		    <td>name</td>
		    <td>Nama file yang diupload.</td>
		    <td>panada_benchmark.jpg</td>
		</tr>
		<tr class="odd">
		    <td>folder</td>
		    <td>Lokasi folder file yang diupload.</td>
		    <td>uploads</td>
		</tr>
		<tr>
		    <td>mime</td>
		    <td>Tipe Mime file yang diupload.</td>
		    <td>image/jpeg</td>
		</tr>
		</tbody>
		</table>
		<p>Contoh output array-nya:</p>
		<code>
		    Array ( [extension] => jpg [name] => panada_benchmark.jpg [folder] => uploads [mime] => image/jpeg )
		</code>
                
            </div>
	    
	    <div class="main">
                <h3>Basic</h3>
                <p>Sebelumnya, Anda harus menentukan lokasi folder tujuan upload. Yang harus diperhatikan adalah chmod dari folder tersebut harus 777.</p>
		<code>
		    $this->upload->folder_location = 'uploads';
		</code>
		
		<p>Anda membutuhkan sebuah form html untuk melakukan upload. Berikut contoh form di dalam file <strong>form_upload.php</strong> yang kemudian disimpan di folder <strong>apps/view</strong></p>
<textarea rows="20" cols="50" class="textarea">
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Panada Form Upload&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;?php print_r($messages);?&gt;

&lt;form method="post" action="" enctype="multipart/form-data"&gt;

    &lt;p&gt;Select your file: &lt;input type="file" name="my_file" /&gt;&lt;/p&gt;
    
    &lt;input type="submit" name="submit" value="upload" /&gt;
    
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt;
</textarea>

<p>Berikut adalah contoh controller untuk menangani proses upload:</p>
<textarea rows="34" cols="50" class="textarea">
&lt;?php

class Controller_sample extends Panada {
    
    public function index(){
        
    }
    
    public function upload(){
	
        $this->upload = new Library_upload();
	
	$this->upload->folder_location = 'uploads';
	
	$data['messages'] = '';
	
	if( isset($_FILES['my_file']) ) {
	    
	    $file = $this->upload->now($_FILES['my_file']);
	    
	    if($file) {
		
		$data['messages'] = $this->upload->get_file_info;
	    }
	    else {
		
		$data['messages'] = $this->upload->error->message;
	    }
	}
	
	$this->view_form_upload($data);
    }
}
</textarea>
                
            </div>
	    
	    <div class="main">
                <h3 id="auto_rename">Auto Rename</h3>
		
		<p>Jika file yang sudah berhasil diupload dan ingin diberi nama baru secara otomatis, gunakan opsi <strong>$this->upload->auto_rename</strong></p>
		<code>
		    $this->upload->auto_rename = true;
		</code>
		<p>Auto rename menggunakan fungsi <strong>time()</strong> dan <strong>rand()</strong> dari PHP. Contoh file yang berhasil diupload adalah <strong>12799728631007713596.jpg</strong>.</p>
		<p>Anda juga bisa menentukan sendiri nama file yang sudah berhasil terupload dengan menggunakan opsi:</p>
		<code>
		    $this->upload->set_file_name = 'new_file_name';
		</code>
		<p>Contoh file yang berhasil terupload adalah <strong>new_file_name.jpg</strong>.</p>
		
	    </div>
	    
	    <div class="main">
                <h3 id="auto_folder">Buat Sub-folder Otomatis</h3>
		
		<p>Jika Anda ingin membuat sub-folder secara otomatis di dalam folder upload, maka gunakan opsi:</p>
		<code>
		    $this->upload->folder_location = 'uploads/'.date('Y').'/'.date('m').'/';
		</code>
		<p>Struktur folder yang dibuat berdasarkan <strong>tahun_ini/bulan_ini</strong>, contohya adalah:</p>
		<code>
			uploads/2010/07/12799728631007713596.jpg
		</code>
			
	    </div>
	    
	    <div class="main">
                <h3 id="file_validation">Validasi Tipe File</h3>
		
		<p>Untuk melakukan validasi tipe file, gunakan opsi:</p>
		<code>
			$this->upload->permitted_file_type = 'gif|php|jpg|pdf';
		</code>
		<p>Gunakan tanda <strong>|</strong> untuk memisahkan setiap jenis file. Pada contoh di atas maka file yang diijinkan diupload adalah file dengan ekstensi gif, php, jpg, dan pdf.</p>
	    </div>
	    
	    <div class="main">
                <h3 id="size_validation">Validasi Ukuran File</h3>
		
		<p>Untuk melakukan validasi ukuran file, gunakan opsi:</p>
		<code>
			$this->upload->maximum_size = 1000000;
		</code>
		<p>Isikan opsi <strong>maximum_size</strong> dengan nilai dalam satuan byte. Untuk contoh di atas file yang bisa dipuload maksimal berukuran 1MB.</p>
		
		<h4 id="error_message">Error Message</h4>
		<p>Untuk menangani pesan error dalam proses upload, Panada mengikuti pesan error PHP untuk variable <strong>$_FILES</strong> yang ada di halaman <a target="_blank" href="http://php.net/manual/en/features.file-upload.errors.php">http://php.net/manual/en/features.file-upload.errors.php</a> ditambah dengan beberapa pesan error tambahan.</p>
		<p>Berikut adalah daftar pesan error dan ID-nya:</p>
		
		<table>
		<thead>
		<tr>
			<th scope="col">ID</th>
			<th scope="col">Message</th>
		</tr>
		</thead>
		<tbody>
		<tr class="odd">
			<td>1</td>
			<td>File upload failed due to unknown error.</td>
		</tr>
		<tr>
			<td>2</td>
			<td>No folder located. Please define the folder location.</td>
		</tr>
		<tr class="odd">
			<td>3</td>
			<td>The uploaded file exceeds the upload_max_filesize directive in php.ini.</td>
		</tr>
		<tr>
			<td>4</td>
			<td>The uploaded file exceeds the MAX_FILE_SIZE directive that was specified in the HTML form.</td>
		</tr>
		<tr class="odd">
			<td>5</td>
			<td>The uploaded file was only partially uploaded.</td>
		</tr>
		<tr>
			<td>6</td>
			<td>No file was uploaded.</td>
		</tr>
		<tr class="odd">
			<td>7</td>
			<td>Missing a temporary folder.</td>
		</tr>
		<tr>
			<td>8</td>
			<td>Failed to write file to disk.</td>
		</tr>
		<tr class="odd">
			<td>9</td>
			<td>File upload stopped by extension.</td>
		</tr>
		<tr>
			<td>10</td>
			<td>Folder you've defined does not exist.</td>
		</tr>
		<tr class="odd">
			<td>11</td>
			<td>Can't create new folder in your defined folder.</td>
		</tr>
		<tr>
			<td>12</td>
			<td>Uploaded file not permitted.</td>
		</tr>
		<tr class="odd">
			<td>13</td>
			<td>The uploaded file exceeds the maximum size.</td>
		</tr>
		<tr>
			<td>14</td>
			<td>File uploaded, but editing image has failed with the following error(s):</td>
		</tr>
		<tr class="odd">
			<td>15</td>
			<td>Folder you specified not writeable.</td>
		</tr>
		</tbody>
		</table>
			
			<p>Anda bisa melakukan modifikasi error-error ini dengan cara memberikan nilai baru pada pada array <strong>$this->upload->error_mesasages</strong>, contohnya:</p>
<textarea rows="5" cols="50" class="textarea">
$error_messages = $this->upload->error_messages;
$error_messages[10] = 'Folder tidak tersedia.';
$error_messages[3] = 'File yang anda upload terlalu besar.';
$this->upload->error_messages = $error_messages;
</textarea>
		
	    </div>
            <div class="main">
                <h3 id="image_editing">Image Editing</h3>
		
		<P>Jika file yang diupload berupa image, Panada menggunakan library <a href="image.html">image</a> untuk melakukan pengeditan. Panada secara otomatis akan me-load library tersebut sehingga Anda tidak perlu lagi melakukannya secara manual.</P>
		<p>Anda hanya perlu menambahkan opsi:</p>
		<code>
			$this->upload->edit_image = array();
		</code>
		<p>Nilai array dari opsi edit_image mengacu pada library <a href="image.html">image</a>.</p>
		<p>Berikut contoh melakukan uplaod image sekaligus resize dengan lebar maksimal 200:</p>
		<code>
			$this->upload->edit_image = array('edit_type' => 'resize', 'resize_width' => 200);
		</code>
		
		<p>Berikut contoh uplad image, resize dengan ukuran 400 dan sekaligus crop dengan ukuran 100 X 100:</p>
		<code>
			$this->upload->edit_image = array('edit_type' => 'resize_crop', 'resize_width' => 400, 'crop_width' => 100, 'crop_height' => 100);
		</code>
		<p>Berikut melakukan uplad image, resize dengan ukuran 400, crop dengan ukuran 100 X 100, simpan dengan nama file cropped:</p>
		<code>
			$this->upload->edit_image = array('edit_type' => 'resize_crop', 'resize_width' => 400, 'crop_width' => 100, 'crop_height' => 100, 'new_file_name' => 'cropped');
		</code>
		
	    </div>
	    
	    <div class="main">
                <h3 id="sample">Sample</h3>
		
		<p>Berikut adalah contoh controller upload dilengkapi dengan beberapa opsi:</p>
<textarea rows="45" cols="50" class="textarea">
&lt;?php

class Controller_sample extends Panada {
    
    public function index(){
        
    }
    
    public function upload(){
	
        $this->upload = new Library_upload();
	
	$this->upload->folder_location = 'uploads';
	$this->upload->auto_rename = true;
	$this->upload->auto_create_folder = true;
	$this->upload->permitted_file_type = 'gif|png|jpg';
	$this->upload->maximum_size = 1000000;
	
	$error_mesasages = $this->upload->error_mesasages;
	$error_mesasages[10] = 'Folder tidak tersedia.';
	$error_mesasages[3] = 'File yang anda upload terlalu besar.';
	$this->upload->error_mesasages = $error_mesasages;
	
	$this->upload->edit_image = array('edit_type' => 'resize', 'resize_width' => 200);
	
	$data['messages'] = '';
	
	if( isset($_FILES['my_file']) ) {
	    
	    $file = $this->upload->now($_FILES['my_file']);
	    
	    if($file) {
		
		$data['messages'] = $this->upload->get_file_info;
	    }
	    else {
		
		$data['messages'] = $this->upload->error->message;
	    }
	}
	
	$this->view_form_upload($data);
    }
}
</textarea>

	    </div>
	    <div id="discussion" class="main">
		<h3>Diskusi</h3>
		<div id="disqus_thread"></div>
	    </div>
	    
        </div>
        
    </div>
          
    <div class="footer">
        <span class="right">All Rights Reserved.</span>
    </div>
    <script type="text/javascript">
	var disqus_shortname = 'panada';
	var disqus_url = 'http://panadaframework.com/documentation/id/classes/upload.html';
	var disqus_identifier = disqus_url;
	(function() {
	    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</body>
</html>